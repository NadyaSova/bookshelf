{"version":3,"sources":["components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/error-boundary/index.js","components/error-boundary/error-boundary.js","components/book-service-context/book-service-context.js","components/hoc/with-book-service.js","actions/index.js","utils/compose.js","components/search-filter/search-filter.js","components/search-filter/index.js","components/book/index.js","components/book/book.js","components/books-list/books-list.js","components/loading-spinner/index.js","components/loading-spinner/loading-spinner.js","components/filtered-books-list/filtered-books-list.js","components/filtered-books-list/index.js","components/selected-books-list/index.js","components/selected-books-list/selected-books-list.js","components/selected-books/selected-books.js","components/pages/select-books-page.js","utils/drawing/drawing-constants.js","components/drawing/book-drawing.js","components/drawing/book-library-background.js","components/drawing/book-pile-drawing.js","utils/drawing/populate-book-sizes.js","utils/drawing/generate-shelves.js","utils/drawing/get-canvas-size.js","utils/drawing/get-evened-pile-margin.js","components/drawing/bookshelf-drawing.js","components/drawing/rack-drawing.js","components/drawing/horizontal-book-pile-drawing.js","components/drawing/vertical-book-pile-drawing.js","components/drawing/book-library-drawing.js","components/pages/bookshelf-page.js","components/app/index.js","components/app/app.js","services/book-service.js","reducers/book-filter.js","reducers/library.js","services/dummy-book-service.js","reducers/index.js","store.js","index.js"],"names":["ErrorIndicator","state","isActive","hide","_this","setState","this","react_default","a","createElement","className","type","data-dismiss","onClick","Component","ErrorBoundary","hasError","components_error_indicator","props","children","React","createContext","BookServiceProvider","Provider","BookServiceConsumer","Consumer","withBookService","Wrapped","bookService","Object","assign","booksFiltered","books","payload","fetchBooks","dispatch","term","getBooks","then","data","catch","err","compose","_len","arguments","length","funcs","Array","_key","comp","reduceRight","wrapped","f","SearchFilter","onChange","e","target","value","onSearch","preventDefault","onSubmit","placeholder","connect","_ref","Book","_this$props","book","showClose","pages","pageCount","concat","error_boundary","src","img","alt","title","authors","BooksList","booksList","map","components_book","key","id","LoadingSpinner","style","width","height","FilteredBooksList","addBookToShelf","loading","error","components_loading_spinner","books_list_books_list","mapDispatchToProps","_ref$bookFilter","bookFilter","SelectedBooksList","SelectedBooks","selectedBooks","removeBookFromShelf","react_router_dom","to","role","components_selected_books_list","SelectBooksPage","components_search_filter","components_filtered_books_list","selected_books_selected_books","pileMargin","shelfHeight","libraryVerticalPadding","minBookWidth","maxBookWidth","minBookHeight","maxBookHeight","minBooksInVerticalPile","maxBooksInVerticalPile","ratioBookWidthToPageCount","maxPageCountForMinWith","basicTestSettings","padding","fill","wrap","align","authorsTextSettings","objectSpread","fontFamily","titleTextSettings","fontStyle","BookDrawing","vertical","textAuthors","rotate","textTitle","rectBook","titleFontSize","fontSize","Math","max","bookWidth","bookHeight","titleElement","Konva","Text","text","authorsElement","getAuthorsFontSize","titleElementHeight","authorsElementHeight","textHeight","adjustFontSize","_this$props2","x","y","_this$adjustFontSize","textMargin","xAuthors","yAuthors","xTitle","yTitle","Fragment","ReactKonva","ref","stroke","strokeWidth","BookLibraryBackground","strokeEnabled","fillLinearGradientStartPoint","fillLinearGradientEndPoint","fillLinearGradientColorStops","BookPileDrawing","vertical_book_pile_drawing","horizontal_book_pile_drawing","populateBookSizes","min","floor","random","generateShelf","maxWidth","piles","pilesWidth","booksCount","pile","generateVerticalPile","generateHorizontalPile","slice","push","maxPileWidth","booksInPile","booksInPileCount","i","pileWidth","generateShelves","shelves","shelf","getKanvasWidth","window","innerWidth","getKanvasHeight","shelvesCount","getEvenedPileMargin","reduce","prev","cur","BookshelfDrawing","evenedPileMargin","react","pileDrawing","book_pile_drawing","rack_drawing","RackDrawing","kanvasWidth","HorizontalBookPileDrawing","maxHeight","apply","toConsumableArray","bookY","bookDrawings","bookX","book_drawing_BookDrawing","VerticalBookPileDrawing","res","getLibraryParams","booksWithSizes","kanvasHeight","BookLibraryDrawing","_getLibraryParams","startY","book_library_background","idx","bookshelf_drawing","BookshelfPage","update","forceUpdate","book_library_drawing","App","react_router","path","component","exact","rp","require","BookService","_optionsBase","headers","User-Agent","json","_urlBase","item","vi","volumeInfo","imageLinks","thumbnail","url","uri","getResource","items","_transformBook","initialBookFilterState","updateBookFilter","action","undefined","updateLibrary","_books","_callee","regenerator_default","_context","next","abrupt","stop","bookToAdd","indexOf","bookToRemove","reducer","store","createStore","ReactDOM","render","es","components_app","document","getElementById"],"mappings":"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ACNN,QAAW,qBACXD,MAAS,6BACTN,UAAa,IACbI,IAAO,mHAET,CACES,GAAM,eACNN,QAAW,iBACXD,MAAS,UACTN,UAAa,IACbI,IAAO,mHAET,CACES,GAAM,eACNN,QAAW,mBACXD,MAAS,wBACTN,UAAa,IACbI,IAAO,mHAET,CACES,GAAM,eACNN,QAAW,kBACXD,MAAS,mBACTN,UAAa,IACbI,IAAO,mHAET,CACES,GAAM,eACNN,QAAW,eACXD,MAAS,mBACTN,UAAa,IACbI,IAAO,mHAET,CACES,GAAM,eACNN,QAAW,mBACXD,MAAS,2BACTN,UAAa,IACbI,IAAO,yGAET,CACES,GAAM,eACNN,QAAW,cACXD,MAAS,+BACTN,UAAa,IACbI,IAAO,mHAET,CACES,GAAM,eACNN,QAAW,uBACXD,MAAS,wBACTN,UAAa,IACbI,IAAO,yGAET,CACES,GAAM,eACNN,QAAW,cACXD,MAAS,WACTN,UAAa,IACbI,IAAO,mHAET,CACES,GAAM,eACNN,QAAW,eACXD,MAAS,WACTN,UAAa,IACbI,IAAO,mHAET,CACES,GAAM,eACNN,QAAW,eACXD,MAAS,kBACTN,UAAa,IACbI,IAAO,mHAET,CACES,GAAM,eACNN,QAAW,eACXD,MAAS,uBACTN,UAAa,IACbI,IAAO,mHAET,CACES,GAAM,eACNN,QAAW,kBACXD,MAAS,sBACTN,UAAa,IACbI,IAAO,mHAET,CACES,GAAM,eACNN,QAAW,eACXD,MAAS,iBACTN,UAAa,IACbI,IAAO,mHAET,CACES,GAAM,eACNN,QAAW,wBACXD,MAAS,gBACTN,UAAa,IACbI,IAAO,mHAET,CACES,GAAM,eACNN,QAAW,cACXD,MAAS,mBACTN,UAAa,IACbI,IAAO,mHAET,CACES,GAAM,eACNN,QAAW,eACXD,MAAS,aACTN,UAAa,IACbI,IAAO,mHAET,CACES,GAAM,eACNN,QAAW,gBACXD,MAAS,uBACTN,UAAa,IACbI,IAAO,mHAET,CACES,GAAM,eACNN,QAAW,gBACXD,MAAS,OACTN,UAAa,IACbI,IAAO,mHAET,CACES,GAAM,eACNN,QAAW,gBACXD,MAAS,uCACTN,UAAa,IACbI,IAAO,yHAIbpC,gCAAW,SAAAmO,IAAA,OAAAC,GAAAjQ,EAAAkH,KAAA,SAAAgJ,GAAA,cAAAA,EAAAhE,KAAAgE,EAAAC,MAAA,cAAAD,EAAAE,OAAA,SACAxQ,EAAKmQ,QADL,wBAAAG,EAAAG,SAAAL,ODzKO,SAACvQ,EAAOmQ,GAC1B,QAAcC,IAAVpQ,EACA,MAAO,GAEX,OAAQmQ,EAAOzP,MACX,IAAK,oBACD,IAAMmQ,EAAYV,EAAOnO,QAEzB,OAAIhC,EAAMiG,cAAc6K,QAAQD,IAAc,EACnC7Q,EAAMiG,cAEjB,CAAQ4K,GAARxM,OAAAzC,OAAA0L,GAAA,EAAA1L,CAAsB5B,EAAMiG,gBAChC,IAAK,yBACD,IAAM8K,EAAeZ,EAAOnO,QACtBiE,EAAgBjG,EAAMiG,cAExBmI,EAAMnI,EAAc6K,QAAQC,GAChC,OAAI3C,EAAM,EACCpO,EAAMiG,cAEjB,GAAA5B,OAAAzC,OAAA0L,GAAA,EAAA1L,CACOqE,EAAcuF,MAAM,EAAG4C,IAD9BxM,OAAA0L,GAAA,EAAA1L,CAEOqE,EAAcuF,MAAM4C,EAAM,KAErC,QACI,OAAOpO,EAAMiG,iBElBV+K,GAPC,SAAChR,EAAOmQ,GACpB,MAAO,CACHrK,WAAYoK,GAAiBlQ,EAAMmQ,GACnClK,cAAeoK,GAAcrQ,EAAMmQ,KCF5Bc,GADDC,aAAYF,ICSpBrP,GAAc,IAAIsN,GAExBkC,IAASC,OACL9Q,EAAAC,EAAAC,cAAC6Q,EAAA,EAAD,CAAUJ,MAAOA,IACb3Q,EAAAC,EAAAC,cAAC8D,EAAD,KACIhE,EAAAC,EAAAC,cAACa,EAAD,CAAqBmC,MAAO7B,IACxBrB,EAAAC,EAAAC,cAAC2F,EAAA,EAAD,KACI7F,EAAAC,EAAAC,cAAC8Q,GAAD,UAKhBC,SAASC,eAAe","file":"static/js/main.5ffec939.chunk.js","sourcesContent":["import ErrorIndicator from './error-indicator';\r\n\r\nexport default ErrorIndicator;","import React, { Component } from 'react'\r\n\r\nimport './error-indicator.css'\r\n\r\nexport default class ErrorIndicator extends Component {\r\n    state = { isActive: true };\r\n\r\n    hide = () => {\r\n        this.setState({ isActive: false });\r\n    };\r\n\r\n    render() {\r\n        if (!this.state.isActive)\r\n            return null;\r\n\r\n        return (\r\n            <div className=\"alert alert-danger alert-dismissible\">\r\n                <button className=\"close\" type=\"button\" data-dismiss=\"alert\" onClick={this.hide}>×</button>\r\n                Oops. Something went wrong.\r\n            </div>\r\n        );\r\n    }\r\n}","import ErrorBoundary from './error-boundary'\r\nexport default ErrorBoundary","import React from 'react'\r\nimport ErrorIndicator from '../error-indicator';\r\n\r\nexport default class ErrorBoundary extends React.Component {\r\n\r\n    state = {\r\n        hasError: false\r\n    }\r\n\r\n    componentDidCatch() {\r\n        this.setState({ hasError: true });\r\n    }\r\n\r\n    render() {\r\n        if (this.state.hasError) {\r\n            return <ErrorIndicator />;\r\n        }\r\n        return this.props.children;\r\n    }\r\n}","import React from 'react';\r\n\r\nconst {\r\n    Provider: BookServiceProvider,\r\n    Consumer: BookServiceConsumer\r\n} = React.createContext();\r\n\r\nexport {\r\n    BookServiceProvider,\r\n    BookServiceConsumer\r\n};","import React from 'react';\r\nimport { BookServiceConsumer } from '../book-service-context';\r\n\r\nconst withBookService = () => (Wrapped) => {    \r\n    return (props) => {\r\n        return (\r\n            <BookServiceConsumer>\r\n                {\r\n                    (bookService) => {\r\n                        return (<Wrapped {...props} bookService={bookService} />);\r\n                    }\r\n                }\r\n            </BookServiceConsumer>\r\n        );\r\n    }\r\n};\r\n\r\nexport default withBookService;","const booksLoadingStart = () => {\r\n    return { type: 'FETCH_BOOKS_REQUEST' };\r\n}\r\n\r\nconst booksFiltered = (books) => {\r\n    return {\r\n        type: 'FETCH_BOOKS_SUCCESS',\r\n        payload: books\r\n    };\r\n}\r\n\r\nconst booksLoadingError = (error) => {\r\n    return {\r\n        type: 'FETCH_BOOKS_FAILURE',\r\n        payload: error\r\n    }\r\n}\r\n\r\nconst fetchBooks = (bookService, dispatch) => (term) => {\r\n    if (!term) {\r\n        dispatch(booksFiltered([]));\r\n        return;\r\n    }\r\n\r\n    dispatch(booksLoadingStart());\r\n    bookService.getBooks(term)\r\n        .then((data) => dispatch(booksFiltered(data)))\r\n        .catch((err) => dispatch(booksLoadingError(err)));\r\n}\r\n\r\nconst addBookToShelf = (book) => {\r\n    return {\r\n        type: 'ADD_BOOK_TO_SHELF',\r\n        payload: book\r\n    }\r\n}\r\n\r\nconst removeBookFromShelf = (book) => {\r\n    return {\r\n        type: 'REMOVE_BOOK_FROM_SHELF',\r\n        payload: book\r\n    }\r\n}\r\n\r\nexport {\r\n    fetchBooks,\r\n    addBookToShelf,\r\n    removeBookFromShelf\r\n}","const compose = (...funcs) => (comp) => {\r\n    return funcs.reduceRight(\r\n        (wrapped, f) => f(wrapped), comp\r\n    );\r\n};\r\n\r\nexport default compose;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { withBookService } from '../hoc';\r\nimport { fetchBooks } from '../../actions';\r\nimport { compose } from '../../utils';\r\n\r\nimport './search-filter.css';\r\n\r\nclass SearchFilter extends Component {\r\n\r\n    state = {\r\n        term: 'abc'\r\n    };\r\n\r\n    onChange = (e) => {\r\n        const term = e.target.value;\r\n        this.setState({ term: term })\r\n    };\r\n\r\n    onSearch = (e) => {        \r\n        e.preventDefault();\r\n        const { term } = this.state;\r\n        const { fetchBooks } = this.props;\r\n        fetchBooks(term);\r\n    };\r\n\r\n    render() {\r\n        const { term } = this.state;\r\n\r\n        return (\r\n            <form onSubmit={this.onSearch}>\r\n                <div className='row mb-3'>\r\n                    <div className='search-filter input-group col-xs-12 col-sm-8 col-md-6 col-lg-5'>\r\n                        <input type='text' placeholder='book title' className='form-control'\r\n                            value={term}\r\n                            onChange={this.onChange}>\r\n                        </input>\r\n                        <div className='input-group-append'>\r\n                            <button\r\n                                type='submit' className='btn btn-primary'\r\n                                onClick={this.onSearch}>Search</button>\r\n                        </div>\r\n                    </div>\r\n                    <div className='col-xs-12 col-sm-4 col-md-6 col-lg-7 align-self-center'><em>\r\n                        Search for books, click on the book to add it to your library</em>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        );\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch, { bookService }) => {\r\n    return {\r\n        fetchBooks: fetchBooks(bookService, dispatch)\r\n    }\r\n};\r\n\r\nexport default compose(\r\n    withBookService(),\r\n    connect(null, mapDispatchToProps)\r\n)(SearchFilter);","import SearchFilter from './search-filter';\r\n\r\nexport default SearchFilter;","import Book from './book';\r\n\r\nexport default Book;","import React, { Component } from 'react';\r\nimport ErrorBoundary from '../error-boundary'\r\n\r\nimport './book.css';\r\n\r\nexport default class Book extends Component {\r\n    render() {\r\n        const { book, onClick, showClose } = this.props;\r\n        const pages = book.pageCount ? `${book.pageCount} pages` : '';\r\n\r\n        return (\r\n            <ErrorBoundary>\r\n                <div className='book card bg-light border-info mb-1'>\r\n                    <div className='card-body' onClick={() => onClick(book)}>\r\n                        <div className='book-image-container' >\r\n                            <img src={book.img} alt=\"book cover\" className='book-image'></img>\r\n                        </div>\r\n\r\n                        <div className='book-info-container' >\r\n                            <div className='book-title mt-1 mb-1'>{book.title}</div>\r\n                            <div className='book-authors mb-1'>{book.authors}</div>\r\n                            <div className='book-info'>{pages}</div>\r\n                        </div>\r\n                        {\r\n                            showClose &&\r\n                            <div>\r\n                                <button type=\"button\" className='close'>×</button>\r\n                            </div>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </ErrorBoundary>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport ErrorBoundary from '../error-boundary';\r\nimport Book from '../book';\r\n\r\nimport './books-list.css'\r\n\r\nconst BooksList = ({ books, onClick }) => {\r\n    if (!books || books.length === 0)\r\n        return <span></span>;\r\n\r\n    const booksList = books.map((book) => {\r\n        return (\r\n            <Book\r\n                key={book.id}\r\n                book={book}\r\n                onClick={onClick} />\r\n        );\r\n    });\r\n    return (\r\n        <ErrorBoundary>\r\n            {booksList}\r\n        </ErrorBoundary>\r\n    );\r\n};\r\n\r\nexport default BooksList;\r\n","import LoadingSpinner from './loading-spinner';\r\n\r\nexport default LoadingSpinner;","import React from 'react';\r\n\r\nimport './loading-spinner.css';\r\n\r\nconst LoadingSpinner = () => {\r\n    return (\r\n        <div className='spinner-container'>\r\n            <div className=\"lds-css ng-scope\">\r\n                <div style={{ width: '100%', height: '100%' }} className=\"lds-magnify\">\r\n                    <div>\r\n                        <div>\r\n                            <div></div>\r\n                            <div></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LoadingSpinner;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { addBookToShelf } from '../../actions';\r\nimport BooksList from '../books-list/books-list';\r\nimport LoadingSpinner from '../loading-spinner';\r\nimport ErrorIndicator from '../error-indicator';\r\n\r\nimport './filtered-books-list.css'\r\n\r\nclass FilteredBooksList extends Component {\r\n    render() {\r\n        const { books, addBookToShelf, loading, error } = this.props;\r\n\r\n        if (loading)\r\n            return <LoadingSpinner />;\r\n\r\n        if (error)\r\n            return <ErrorIndicator />\r\n\r\n        return <BooksList books={books} onClick={addBookToShelf} />\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({bookFilter: { books, loading, error }}) => {\r\n    return { books, loading, error };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    addBookToShelf\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FilteredBooksList);","import FilteredBooksList from './filtered-books-list';\r\n\r\nexport default FilteredBooksList;","import SelectedBooksList from './selected-books-list';\r\n\r\nexport default SelectedBooksList;","import React, { Component } from 'react';\r\nimport Book from '../book';\r\nimport ErrorBoundary from '../error-boundary';\r\n\r\nimport './selected-books-list.css'\r\n\r\nexport default class SelectedBooksList extends Component {\r\n    render() {\r\n        const { books, onClick } = this.props;\r\n        if (!books || books.length === 0)\r\n            return <span></span>;\r\n\r\n        const booksList = books.map((book) => {\r\n            return (\r\n                <Book\r\n                    book={book}\r\n                    key={book.id}\r\n                    onClick={onClick}\r\n                    showClose={true}/>\r\n            );\r\n        });\r\n        return (\r\n            <ErrorBoundary>\r\n                <div className='card-columns' id='books-list'>{booksList}</div>\r\n            </ErrorBoundary>\r\n        );\r\n    }\r\n}\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport { removeBookFromShelf } from '../../actions';\r\nimport SelectedBooksList from '../selected-books-list'\r\n\r\nimport './selected-books.css'\r\n\r\nclass SelectedBooks extends React.Component {\r\n    render() {\r\n        const { selectedBooks, removeBookFromShelf } = this.props;\r\n        if (!selectedBooks || selectedBooks.length === 0)\r\n            return null;\r\n\r\n        return (\r\n            <div className='selected-books jumbotron'>\r\n                <div className='generate-link'>\r\n                    <Link to='/bookshelf' role='button' className='btn btn-link mb-1'>\r\n                        <i className=\"fas fa-stream mr-1\"></i>\r\n                        Generate bookshelf\r\n                        <i className=\"fas fa-angle-double-right ml-1\"></i>\r\n                    </Link>\r\n                </div>\r\n\r\n                <SelectedBooksList\r\n                    books={selectedBooks}\r\n                    onClick={removeBookFromShelf} />\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({ selectedBooks }) => {\r\n    return {\r\n        selectedBooks: selectedBooks\r\n    };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    removeBookFromShelf\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectedBooks);","import React from 'react';\r\n\r\nimport ErrorBoundary from '../../components/error-boundary';\r\nimport SearchFilter from '../../components/search-filter';\r\nimport FilteredBooksList from '../../components/filtered-books-list';\r\nimport SelectedBooks from '../../components/selected-books/selected-books';\r\n\r\nconst SelectBooksPage = () => {\r\n    return (\r\n        <ErrorBoundary>\r\n            <div className='ml-4 mr-4 mt-2 mb-2'>\r\n                <h2 className='mb-3'>Library</h2>\r\n                <SearchFilter />\r\n                <div className='row'>\r\n                    <div className='col-sm-6 col-md-4'>\r\n                        <FilteredBooksList />\r\n                    </div>\r\n                    <div className='col-sm-6 col-md-8'>\r\n                        <SelectedBooks />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </ErrorBoundary>\r\n    );\r\n};\r\n\r\nexport default SelectBooksPage;","const pileMargin = 20;\r\nconst shelfHeight = 275;\r\nconst rackHeight = 18;\r\nconst libraryVerticalPadding = 20;\r\n\r\nconst minBookWidth = 40;\r\nconst maxBookWidth = 70;\r\nconst minBookHeight = 180;\r\nconst maxBookHeight = 250;\r\n\r\nconst maxFontSize = 22;\r\nconst minFontSize = 6;\r\n\r\nconst minBooksInVerticalPile = 3;\r\nconst maxBooksInVerticalPile = 6;\r\n\r\nconst ratioBookWidthToPageCount = 0.05;\r\nconst maxPageCountForMinWith = 80;\r\n\r\nexport {\r\n    pileMargin,\r\n    shelfHeight,\r\n    minBookHeight,\r\n    maxBookHeight,\r\n    minBookWidth,\r\n    maxBookWidth,\r\n    maxFontSize,\r\n    minFontSize,\r\n    rackHeight,\r\n    libraryVerticalPadding,\r\n    minBooksInVerticalPile,\r\n    maxBooksInVerticalPile,\r\n    ratioBookWidthToPageCount,\r\n    maxPageCountForMinWith\r\n};","import React, { Component } from 'react'\r\nimport { Text, Rect } from 'react-konva';\r\nimport Konva from 'konva';\r\n\r\nimport { maxFontSize, minFontSize } from '../../utils/drawing/drawing-constants';\r\n\r\nconst padding = 3;\r\nconst basicTestSettings = {\r\n    padding: padding,\r\n    fill: 'black',\r\n    wrap: 'word',\r\n    align: 'center'\r\n};\r\nconst authorsTextSettings = { ...basicTestSettings, fontFamily: 'Montserrat' };\r\nconst titleTextSettings = { ...basicTestSettings, fontFamily: 'Alegreya SC', fontStyle: 'bolder' };\r\n\r\n\r\nexport default class BookDrawing extends Component {\r\n\r\n    componentDidMount() {\r\n        const { vertical } = this.props;\r\n        if (vertical) {\r\n            this.textAuthors.rotate(-90);\r\n            this.textTitle.rotate(-90);\r\n            this.rectBook.rotate(-90);\r\n        }\r\n    }\r\n\r\n    getAuthorsFontSize(titleFontSize) {\r\n        const fontSize = titleFontSize - 4;\r\n        return Math.max(fontSize, minFontSize);\r\n    }\r\n\r\n    adjustFontSize(fontSize) {\r\n        const { title, authors, width: bookWidth, height: bookHeight } = this.props;\r\n\r\n        const titleElement = new Konva.Text(\r\n            {\r\n                text: title,\r\n                fontSize: fontSize,\r\n                width: bookHeight,\r\n                ...titleTextSettings\r\n            }\r\n        );\r\n        const authorsElement = new Konva.Text(\r\n            {\r\n                text: authors,\r\n                fontSize: this.getAuthorsFontSize(fontSize),\r\n                width: bookHeight,\r\n                ...authorsTextSettings\r\n            }\r\n        );\r\n\r\n        const titleElementHeight = titleElement.height();\r\n        const authorsElementHeight = authorsElement.height();\r\n        const textHeight = titleElementHeight + authorsElementHeight;\r\n\r\n        if (fontSize === minFontSize || textHeight <= bookWidth)\r\n            return { fontSize, authorsElementHeight, textHeight };\r\n\r\n        return this.adjustFontSize(fontSize - 1);\r\n    }\r\n\r\n    render() {\r\n        const { title, authors, x, y, width: bookWidth, height: bookHeight, vertical } = this.props;\r\n\r\n        const { fontSize, authorsElementHeight, textHeight } = this.adjustFontSize(maxFontSize);\r\n\r\n        const textMargin = (bookWidth - textHeight) / 2;\r\n        const xAuthors = vertical ? x + textMargin : x;\r\n        const yAuthors = vertical ? y : y + textMargin;\r\n\r\n        const xTitle = vertical ? xAuthors + authorsElementHeight : xAuthors;\r\n        const yTitle = vertical ? yAuthors : yAuthors + authorsElementHeight;\r\n\r\n        return (\r\n            <React.Fragment>\r\n\r\n                <Rect\r\n                    x={x}\r\n                    y={y}\r\n                    height={bookWidth}\r\n                    width={bookHeight}\r\n                    ref={ref => (this.rectBook = ref)}\r\n                    fill='white'\r\n                    stroke='saddlebrown'\r\n                    strokeWidth={3}\r\n                />\r\n\r\n                <Text\r\n                    x={xAuthors}\r\n                    y={yAuthors}\r\n                    ref={ref => (this.textAuthors = ref)}\r\n                    fontSize={this.getAuthorsFontSize(fontSize)}\r\n                    text={authors}\r\n                    height={bookWidth}\r\n                    width={bookHeight}\r\n                    {...authorsTextSettings}\r\n                />\r\n\r\n                <Text\r\n                    x={xTitle}\r\n                    y={yTitle}\r\n                    ref={ref => (this.textTitle = ref)}\r\n                    fontSize={fontSize}\r\n                    text={title}\r\n                    height={bookWidth - authorsElementHeight}\r\n                    width={bookHeight}\r\n                    {...titleTextSettings}\r\n                />\r\n\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport { Rect } from 'react-konva';\r\n\r\nconst BookLibraryBackground = ({ width, height }) => {\r\n    return (\r\n        <Rect\r\n            x={0}\r\n            y={0}\r\n            width={width}\r\n            height={height}\r\n            strokeEnabled={false}\r\n            fillLinearGradientStartPoint={{ x: 0, y: 0 }}\r\n            fillLinearGradientEndPoint={{ x: width / 5 * 6, y: height }}\r\n            fillLinearGradientColorStops={[0, 'Ivory', 1, 'AntiqueWhite']}\r\n        />);\r\n};\r\n\r\nexport default BookLibraryBackground;","import React from 'react';\r\n\r\nimport { VerticalBookPileDrawing, HorizontalBookPileDrawing } from '.';\r\n\r\nconst BookPileDrawing = (props) => {\r\n    const { books, vertical } = props;\r\n    \r\n    if (!books || books.length === 0)\r\n        return null;\r\n\r\n    if (vertical)\r\n        return <VerticalBookPileDrawing {...props} />;\r\n    else\r\n        return <HorizontalBookPileDrawing {...props} />;\r\n}\r\n\r\nexport default BookPileDrawing;","import {\r\n    minBookHeight,\r\n    maxBookHeight,\r\n    minBookWidth,\r\n    maxBookWidth,\r\n    ratioBookWidthToPageCount,\r\n    maxPageCountForMinWith\r\n} from './drawing-constants';\r\n\r\n\r\nfunction populateBookSizes(books) {\r\n    if (!books)\r\n        return undefined;\r\n\r\n    return books.map((book) => {\r\n        return {\r\n            ...book,\r\n            width: getWidth(book.pageCount),\r\n            height: getHeight()\r\n        };\r\n    })\r\n};\r\n\r\nfunction getWidth(pageCount) {\r\n    if (!pageCount || pageCount <= maxPageCountForMinWith)\r\n        return minBookWidth;\r\n\r\n    return Math.min(\r\n        maxBookWidth,\r\n        minBookWidth + Math.floor((pageCount - maxPageCountForMinWith) * ratioBookWidthToPageCount)\r\n    );\r\n};\r\n\r\nfunction getHeight() {\r\n    return minBookHeight + Math.floor(Math.random() * (maxBookHeight - minBookHeight));\r\n};\r\n\r\nexport default populateBookSizes;","import { pileMargin, maxBookHeight, minBooksInVerticalPile, maxBooksInVerticalPile } from './drawing-constants';\r\n\r\nfunction generateShelves(books, maxWidth) {\r\n    let booksCount = 0;\r\n    const shelves = [];\r\n\r\n    while (booksCount < books.length) {\r\n        const shelf = generateShelf(books.slice(booksCount), maxWidth);\r\n        shelves.push(shelf.piles);\r\n        booksCount += shelf.booksCount;\r\n    }\r\n    return shelves;\r\n};\r\n\r\nfunction generateShelf(books, maxWidth) {\r\n    const piles = [];\r\n    let pilesWidth = 0;\r\n    let booksCount = 0;\r\n    let vertical = Math.random() > 0.5;\r\n\r\n    while (booksCount < books.length && pilesWidth < maxWidth) {\r\n        let generatePile = vertical ? generateVerticalPile : generateHorizontalPile;\r\n        let pile = generatePile(books.slice(booksCount), maxWidth - pilesWidth);\r\n\r\n        if (pile.books.length === 0)\r\n            return { piles, booksCount };\r\n\r\n        piles.push(pile);\r\n        booksCount += pile.books.length;\r\n        pilesWidth += (pile.width + pileMargin);\r\n        vertical = !vertical;\r\n    }\r\n    return { piles, booksCount };\r\n};\r\n\r\nfunction generateVerticalPile(books, maxPileWidth) {\r\n    const booksInPile = [];\r\n    const booksInPileCount = Math.min(\r\n        books.length,\r\n        Math.floor(Math.random() * (maxBooksInVerticalPile - minBooksInVerticalPile) + minBooksInVerticalPile)\r\n    );\r\n\r\n    for (var i = 0, pileWidth = 0; i < booksInPileCount; i++) {\r\n        const book = books[i];\r\n        if (pileWidth + book.width >= maxPileWidth)\r\n            break;\r\n\r\n        pileWidth += book.width;\r\n        booksInPile.push(book);\r\n    }\r\n\r\n    return { books: booksInPile, width: pileWidth, vertical: true };\r\n};\r\n\r\nfunction generateHorizontalPile(books, maxPileWidth) {\r\n    if (books.length === 0) {\r\n        return { books: [], width: 0, vertical: false };\r\n    }\r\n\r\n    const booksInPile = [];\r\n    let pileWidth = 0;\r\n\r\n    for (let i = 0, height = books[0].width;\r\n        i < books.length && books[i].height < maxPileWidth && height < maxBookHeight;\r\n        i++ , height += (books[i] || {}).width) {\r\n\r\n        const book = books[i];\r\n        pileWidth = Math.max(pileWidth, book.height);\r\n        booksInPile.push(book);\r\n    }\r\n    return { books: booksInPile, width: pileWidth, vertical: false };\r\n};\r\n\r\nexport default generateShelves;","import { shelfHeight, libraryVerticalPadding } from './drawing-constants';\r\n\r\nfunction getKanvasSize(shelvesCount) {\r\n    return { width: getKanvasWidth(), height: getKanvasHeight(shelvesCount) };\r\n};\r\n\r\nfunction getKanvasWidth() {\r\n    return window.innerWidth - 40;\r\n};\r\n\r\nfunction getKanvasHeight(shelvesCount) {\r\n    return shelvesCount * shelfHeight + 2 * libraryVerticalPadding;\r\n};\r\n\r\nexport {\r\n    getKanvasHeight,\r\n    getKanvasWidth,\r\n    getKanvasSize    \r\n};","import { getKanvasWidth } from './get-canvas-size';\r\n\r\nfunction getEvenedPileMargin(piles) {\r\n    const kanvasWidth = getKanvasWidth();\r\n    const pilesWidth = piles.reduce((prev, cur) => prev + cur.width, 0);\r\n    return (kanvasWidth - pilesWidth) / (piles.length + 1);\r\n};\r\n\r\nexport default getEvenedPileMargin;","import React, { Fragment } from 'react';\r\n\r\nimport { BookPileDrawing, RackDrawing } from '.';\r\nimport { getEvenedPileMargin } from '../../utils/drawing';\r\n\r\nconst BookshelfDrawing = ({ shelf, y }) => {\r\n    const evenedPileMargin = getEvenedPileMargin(shelf)    \r\n    var x = evenedPileMargin;\r\n\r\n    return (\r\n        <Fragment>\r\n            {shelf.map(pile => {\r\n                const pileDrawing = (\r\n                    <BookPileDrawing\r\n                        key={pile.books[0].id}\r\n                        books={pile.books}\r\n                        vertical={pile.vertical}\r\n                        x={x}\r\n                        y={y} />\r\n                );\r\n                x += (pile.width + evenedPileMargin)\r\n                return pileDrawing;\r\n            })}\r\n            <RackDrawing y={y} />\r\n        </Fragment>\r\n    );\r\n}\r\n\r\nexport default BookshelfDrawing;","import React from 'react'\r\nimport { Rect } from 'react-konva';\r\n\r\nimport { pileMargin, rackHeight } from '../../utils/drawing/drawing-constants';\r\nimport { getKanvasWidth } from '../../utils/drawing';\r\n\r\nconst RackDrawing = ({y}) => {\r\n    const kanvasWidth = getKanvasWidth();\r\n\r\n    return (\r\n        <Rect\r\n            x={pileMargin / 2}\r\n            y={y}\r\n            width={kanvasWidth - pileMargin}\r\n            height={rackHeight}\r\n            fillLinearGradientStartPoint={{ x: kanvasWidth / 4, y: 0 }}\r\n            fillLinearGradientEndPoint={{ x: kanvasWidth * 3 / 4, y: rackHeight }}\r\n            fillLinearGradientColorStops={[0, 'sienna', 1, 'saddlebrown']}\r\n            strokeEnabled={false}\r\n        />);\r\n}\r\n\r\nexport default RackDrawing;","import React from 'react';\r\nimport { BookDrawing } from '.';\r\n\r\nconst HorizontalBookPileDrawing = ({ books, x, y }) => {\r\n    const maxHeight = Math.max(...books.map(book => book.height));\r\n    var bookY = y;\r\n\r\n    const bookDrawings = books.map((book) => {\r\n        const bookX = Math.floor(x + (maxHeight - book.height) / 2);\r\n        bookY -= book.width;\r\n        return (\r\n            <BookDrawing\r\n                key={book.id}\r\n                title={book.title}\r\n                authors={book.authors}\r\n                x={bookX}\r\n                y={bookY}\r\n                width={book.width}\r\n                height={book.height}\r\n            />);\r\n    });\r\n    return (\r\n        <React.Fragment>\r\n            {bookDrawings}\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nexport default HorizontalBookPileDrawing;","import React from 'react';\r\nimport { BookDrawing } from '.';\r\n\r\nconst VerticalBookPileDrawing = ({ books, x, y }) => {\r\n    var bookX = x;\r\n    const bookDrawings = books.map((book, i) => {\r\n        const res = (\r\n            <BookDrawing\r\n                key={book.id}\r\n                title={book.title}\r\n                authors={book.authors}\r\n                x={bookX}\r\n                y={y}\r\n                width={book.width}\r\n                height={book.height}\r\n                vertical />);\r\n\r\n        bookX += book.width;\r\n        return res;\r\n    });\r\n    return (\r\n        <React.Fragment>\r\n            {bookDrawings}\r\n        </React.Fragment>\r\n    );\r\n};\r\nexport default VerticalBookPileDrawing;","import React from 'react';\r\nimport { Stage, Layer } from 'react-konva';\r\n\r\nimport { BookshelfDrawing, BookLibraryBackground } from '.';\r\nimport { pileMargin, shelfHeight, maxBookHeight, libraryVerticalPadding } from '../../utils/drawing/drawing-constants';\r\nimport { populateBookSizes, generateShelves, getKanvasHeight, getKanvasWidth } from '../../utils/drawing';\r\n\r\nconst BookLibraryDrawing = ({ books }) => {\r\n    if (!books || books.length === 0) {\r\n        return null;\r\n    }\r\n\r\n    const { kanvasWidth, kanvasHeight, shelves } = getLibraryParams(books);\r\n    const startY = maxBookHeight + libraryVerticalPadding;\r\n\r\n    return (\r\n        <Stage width={kanvasWidth} height={kanvasHeight}>\r\n            <Layer>\r\n                <BookLibraryBackground width={kanvasWidth} height={kanvasHeight} />\r\n                {\r\n                    shelves.map((shelf, idx) =>\r\n                        <BookshelfDrawing key={idx} shelf={shelf} y={startY + idx * shelfHeight} />\r\n                    )\r\n                }\r\n            </Layer>\r\n        </Stage>\r\n    );\r\n}\r\n\r\nconst getLibraryParams = (books) => {\r\n    const booksWithSizes = populateBookSizes(books);\r\n\r\n    const kanvasWidth = getKanvasWidth();\r\n    const maxShelfWidth = kanvasWidth - pileMargin;\r\n    const shelves = generateShelves(booksWithSizes, maxShelfWidth);\r\n    const kanvasHeight = getKanvasHeight(shelves.length);\r\n\r\n    return { kanvasWidth, kanvasHeight, shelves };\r\n}\r\n\r\nexport default BookLibraryDrawing;","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nimport BookLibraryDrawing from '../../components/drawing/book-library-drawing';\r\n\r\nclass BookshelfPage extends Component {\r\n\r\n    update = () => {\r\n        this.forceUpdate();\r\n    }\r\n\r\n    render() {\r\n        const { selectedBooks } = this.props;\r\n\r\n        return (\r\n            <div className='container-fluid'>\r\n\r\n                <Link to='/' className='btn btn-link'>\r\n                    <i className='fas fa-angle-double-left mr-1'></i>\r\n                    Back to books select\r\n                </Link>\r\n                \r\n                <h2 className='ml-4'>Bookshelf\r\n                    <button className='btn btn-link' onClick={this.update}>\r\n                        <i className='fas fa-sync-alt'></i>\r\n                    </button>\r\n                </h2>\r\n\r\n                <BookLibraryDrawing books={selectedBooks} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({ selectedBooks }) => {\r\n    return {\r\n        selectedBooks: selectedBooks\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps)(BookshelfPage);\r\n\r\n","import App from './app'\r\nexport default App\r\n","import React from 'react';\r\nimport { Route, Switch, Redirect } from 'react-router-dom';\r\n\r\nimport SelectBooksPage from '../pages/select-books-page';\r\nimport BookshelfPage from '../pages/bookshelf-page';\r\n\r\n\r\nconst App = () => {\r\n    return (\r\n        <Switch>\r\n            <Route\r\n                path='/'\r\n                component={SelectBooksPage}\r\n                exact />\r\n\r\n            <Route\r\n                path='/bookshelf'\r\n                component={BookshelfPage} />\r\n\r\n            <Redirect to='/' />\r\n        </Switch>\r\n    );\r\n};\r\n\r\nexport default App;","const rp = require('request-promise');\r\n\r\nexport default class BookService {\r\n\r\n    _optionsBase = {\r\n        headers: { 'User-Agent': 'Request-Promise' },\r\n        json: true\r\n    };\r\n\r\n    _urlBase = 'https://www.googleapis.com/books/v1/';\r\n\r\n    _transformBook(item) {\r\n        const vi = item.volumeInfo;\r\n        if (!vi.imageLinks)\r\n            vi.imageLinks = {};\r\n\r\n        const authors = vi.authors ? vi.authors.reduce((prev, cur) => { return prev + ', ' + cur }) : '';\r\n\r\n        return {\r\n            id: item.id,\r\n            authors,\r\n            title: vi.title,\r\n            pageCount: vi.pageCount,\r\n            img: vi.imageLinks.thumbnail\r\n        };\r\n    };\r\n\r\n    async getResource(url) {\r\n        return await rp({ ...this._optionsBase, uri: `${this._urlBase}${url}` });\r\n    };\r\n\r\n    async getBooks(term) {\r\n        const uri = `volumes?q=${term}`;\r\n        return this.getResource(uri).then((res) => {\r\n            return res.items.map(this._transformBook);\r\n        });\r\n    };\r\n}","const initialBookFilterState = {\r\n    books: [],\r\n    loading: false,\r\n    error: null\r\n}\r\n\r\nconst updateBookFilter = (state, action) => {\r\n    if (state === undefined)\r\n        return initialBookFilterState;\r\n\r\n    switch (action.type) {\r\n        case 'FETCH_BOOKS_SUCCESS':\r\n            return {\r\n                books: action.payload,\r\n                loading: false,\r\n                error: null\r\n            }\r\n        case 'FETCH_BOOKS_REQUEST':\r\n            return {\r\n                loading: true,\r\n                error: null\r\n            };\r\n        case 'FETCH_BOOKS_FAILURE':\r\n            return {\r\n                books: [],\r\n                loading: false,\r\n                error: action.payload\r\n            }\r\n        default:\r\n            return state.bookFilter;\r\n    }\r\n}\r\n\r\nexport default updateBookFilter;","import DummyBookService from '../services/dummy-book-service';\r\nconst service = new DummyBookService();\r\n\r\nconst updateLibrary = (state, action) => {\r\n    if (state === undefined)\r\n        return [];//service._books;\r\n\r\n    switch (action.type) {\r\n        case 'ADD_BOOK_TO_SHELF':\r\n            const bookToAdd = action.payload;\r\n\r\n            if (state.selectedBooks.indexOf(bookToAdd) >= 0)\r\n                return state.selectedBooks;\r\n\r\n            return [bookToAdd, ...state.selectedBooks];\r\n        case 'REMOVE_BOOK_FROM_SHELF':\r\n            const bookToRemove = action.payload;\r\n            const selectedBooks = state.selectedBooks;\r\n\r\n            let idx = selectedBooks.indexOf(bookToRemove);\r\n            if (idx < 0)\r\n                return state.selectedBooks;\r\n\r\n            return [\r\n                ...selectedBooks.slice(0, idx),\r\n                ...selectedBooks.slice(idx + 1)\r\n            ];\r\n        default:\r\n            return state.selectedBooks;\r\n    }\r\n}\r\n\r\nexport default updateLibrary;","export default class DummyBookService {\r\n    _books = [\r\n        {\r\n          \"id\": \"sTA2DwAAQBAJ\",\r\n          \"authors\": \"George R.R. Martin\",\r\n          \"title\": \"A Game of Thrones (A Song of Ice and Fire)\",\r\n          \"pageCount\": 896,\r\n          \"img\": \"http://books.google.com/books/content?id=sTA2DwAAQBAJ&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"\r\n        },\r\n        {\r\n          \"id\": \"OYtkbGl2j0sC\",\r\n          \"authors\": \"Ray Bradbury\",\r\n          \"title\": \"Fahrenheit 451\",\r\n          \"pageCount\": 208,\r\n          \"img\": \"http://books.google.com/books/content?id=OYtkbGl2j0sC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"\r\n        },\r\n        {\r\n          \"id\": \"nkalO3OsoeMC\",\r\n          \"authors\": \"George Orwell\",\r\n          \"title\": \"Animal Farm\",\r\n          \"pageCount\": 144,\r\n          \"img\": \"http://books.google.com/books/content?id=nkalO3OsoeMC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"\r\n        },\r\n        {\r\n          \"id\": \"Bd_UZAdvUDIC\",\r\n          \"authors\": \"William Gibson\",\r\n          \"title\": \"Neuromancer\",\r\n          \"pageCount\": 288,\r\n          \"img\": \"http://books.google.com/books/content?id=Bd_UZAdvUDIC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"\r\n        },\r\n        {\r\n          \"id\": \"gnwETwF8Zb4C\",\r\n          \"authors\": \"Robert A. Heinlein\",\r\n          \"title\": \"Stranger in a Strange Land\",\r\n          \"pageCount\": 300,\r\n          \"img\": \"http://books.google.com/books/content?id=gnwETwF8Zb4C&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"\r\n        },\r\n        {\r\n          \"id\": \"MYoDAQAAQBAJ\",\r\n          \"authors\": \"Octavia Butler\",\r\n          \"title\": \"Kindred\",\r\n          \"pageCount\": 264,\r\n          \"img\": \"http://books.google.com/books/content?id=MYoDAQAAQBAJ&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"\r\n        },\r\n        {\r\n          \"id\": \"HtDpW3qwc88C\",\r\n          \"authors\": \"Arthur C. Clarke\",\r\n          \"title\": \"2001: A Space Odyssey\",\r\n          \"pageCount\": 288,\r\n          \"img\": \"http://books.google.com/books/content?id=HtDpW3qwc88C&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"\r\n        },\r\n        {\r\n          \"id\": \"_zSzAwAAQBAJ\",\r\n          \"authors\": \"Suzanne Collins\",\r\n          \"title\": \"The Hunger Games\",\r\n          \"pageCount\": 464,\r\n          \"img\": \"http://books.google.com/books/content?id=_zSzAwAAQBAJ&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"\r\n        },\r\n        {\r\n          \"id\": \"8qs1-ypf7e0C\",\r\n          \"authors\": \"Ernest Cline\",\r\n          \"title\": \"Ready Player One\",\r\n          \"pageCount\": 384,\r\n          \"img\": \"http://books.google.com/books/content?id=8qs1-ypf7e0C&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"\r\n        },\r\n        {\r\n          \"id\": \"k53eZ2ARZPwC\",\r\n          \"authors\": \"Walter M. Miller\",\r\n          \"title\": \"A Canticle for Leibowitz\",\r\n          \"pageCount\": 352,\r\n          \"img\": \"http://books.google.com/books/content?id=k53eZ2ARZPwC&printsec=frontcover&img=1&zoom=1&source=gbs_api\"\r\n        },\r\n        {\r\n          \"id\": \"A4LZwFCK05UC\",\r\n          \"authors\": \"Jules Verne\",\r\n          \"title\": \"20,000 Leagues under the Sea\",\r\n          \"pageCount\": 568,\r\n          \"img\": \"http://books.google.com/books/content?id=A4LZwFCK05UC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"\r\n        },\r\n        {\r\n          \"id\": \"bQlHAAAAYAAJ\",\r\n          \"authors\": \"Herbert George Wells\",\r\n          \"title\": \"The War of the Worlds\",\r\n          \"pageCount\": 303,\r\n          \"img\": \"http://books.google.com/books/content?id=bQlHAAAAYAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api\"\r\n        },\r\n        {\r\n          \"id\": \"u4R_FstZDEgC\",\r\n          \"authors\": \"Dan Simmons\",\r\n          \"title\": \"Hyperion\",\r\n          \"pageCount\": 496,\r\n          \"img\": \"http://books.google.com/books/content?id=u4R_FstZDEgC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"\r\n        },\r\n        {\r\n          \"id\": \"2vnbMzYXBQsC\",\r\n          \"authors\": \"Isaac Asimov\",\r\n          \"title\": \"I, Robot\",\r\n          \"pageCount\": 304,\r\n          \"img\": \"http://books.google.com/books/content?id=2vnbMzYXBQsC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"\r\n        },\r\n        {\r\n          \"id\": \"KHsHltMFsRAC\",\r\n          \"authors\": \"Joe Haldeman\",\r\n          \"title\": \"The Forever War\",\r\n          \"pageCount\": 236,\r\n          \"img\": \"http://books.google.com/books/content?id=KHsHltMFsRAC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"\r\n        },\r\n        {\r\n          \"id\": \"_oG_iTxP1pIC\",\r\n          \"authors\": \"Daniel Keyes\",\r\n          \"title\": \"Flowers for Algernon\",\r\n          \"pageCount\": 304,\r\n          \"img\": \"http://books.google.com/books/content?id=_oG_iTxP1pIC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"\r\n        },\r\n        {\r\n          \"id\": \"o79lk6nTsRgC\",\r\n          \"authors\": \"Margaret Atwood\",\r\n          \"title\": \"The Handmaid's Tale\",\r\n          \"pageCount\": 336,\r\n          \"img\": \"http://books.google.com/books/content?id=o79lk6nTsRgC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"\r\n        },\r\n        {\r\n          \"id\": \"v-IoDwAAQBAJ\",\r\n          \"authors\": \"Stephen King\",\r\n          \"title\": \"The Green Mile\",\r\n          \"pageCount\": 512,\r\n          \"img\": \"http://books.google.com/books/content?id=v-IoDwAAQBAJ&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"\r\n        },\r\n        {\r\n          \"id\": \"8JyRntokmqYC\",\r\n          \"authors\": \"Raychel Haugrud Reiff\",\r\n          \"title\": \"Aldous Huxley\",\r\n          \"pageCount\": 144,\r\n          \"img\": \"http://books.google.com/books/content?id=8JyRntokmqYC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"\r\n        },\r\n        {\r\n          \"id\": \"einYDQAAQBAJ\",\r\n          \"authors\": \"H. G. Wells\",\r\n          \"title\": \"The Time Machine\",\r\n          \"pageCount\": 144,\r\n          \"img\": \"http://books.google.com/books/content?id=einYDQAAQBAJ&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"\r\n        },\r\n        {\r\n          \"id\": \"IwywDY4P6gsC\",\r\n          \"authors\": \"Isaac Asimov\",\r\n          \"title\": \"Foundation\",\r\n          \"pageCount\": 320,\r\n          \"img\": \"http://books.google.com/books/content?id=IwywDY4P6gsC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"\r\n        },\r\n        {\r\n          \"id\": \"FTHnGZeroUoC\",\r\n          \"authors\": \"George Orwell\",\r\n          \"title\": \"Nineteen Eighty-Four\",\r\n          \"pageCount\": 416,\r\n          \"img\": \"http://books.google.com/books/content?id=FTHnGZeroUoC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"\r\n        },\r\n        {\r\n          \"id\": \"p1MULH7JsTQC\",\r\n          \"authors\": \"Frank Herbert\",\r\n          \"title\": \"Dune\",\r\n          \"pageCount\": 896,\r\n          \"img\": \"http://books.google.com/books/content?id=p1MULH7JsTQC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"\r\n        },\r\n        {\r\n          \"id\": \"j24GMN0OtS8C\",\r\n          \"authors\": \"Douglas Adams\",\r\n          \"title\": \"The Hitchhiker's Guide to the Galaxy\",\r\n          \"pageCount\": 304,\r\n          \"img\": \"http://books.google.com/books/content?id=j24GMN0OtS8C&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"\r\n        }\r\n      ];\r\n\r\n    getBooks = async () => {\r\n        return this._books;\r\n    }\r\n}","import updateBookFilter from './book-filter';\r\nimport updateLibrary from './library'\r\n\r\nconst reducer = (state, action) => {\r\n    return {\r\n        bookFilter: updateBookFilter(state,action),\r\n        selectedBooks: updateLibrary(state,action)\r\n    };\r\n}\r\n\r\nexport default reducer;","import {createStore} from 'redux';\r\nimport reducer from './reducers';\r\n\r\nconst store = createStore(reducer);\r\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport App from './components/app';\nimport ErrorBoundary from './components/error-boundary';\nimport BookService from './services/book-service';\nimport { BookServiceProvider } from './components/book-service-context';\n\nimport store from './store';\n\nconst bookService = new BookService();\n\nReactDOM.render(\n    <Provider store={store}>\n        <ErrorBoundary>\n            <BookServiceProvider value={bookService}>\n                <Router>\n                    <App />\n                </Router>\n            </BookServiceProvider>\n        </ErrorBoundary>\n    </Provider>,\n    document.getElementById('root')\n);"],"sourceRoot":""}